# ============================================================================
# SMARTSUITE API SHIM - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control
#
# Project: SmartSuite API Shim - Knowledge Platform Integration
# Shares Supabase with EAV Orchestrator: vbcfaegexbygqgsstoig
# ============================================================================

# ============================================================================
# SMARTSUITE API CONFIGURATION (REQUIRED)
# ============================================================================
# Get from SmartSuite Settings > API

# SmartSuite API Token (40-character hexadecimal string)
SMARTSUITE_API_TOKEN=your-smartsuite-api-token-here
SMARTSUITE_API_KEY=your-smartsuite-api-token-here

# SmartSuite Workspace ID (found in URL or API responses)
# Example: s3qnmox1 (EAV production workspace)
SMARTSUITE_WORKSPACE_ID=s3qnmox1
SMARTSUITE_ACCOUNT_ID=elevanaltd

# SmartSuite API Base URL (usually not changed)
SMARTSUITE_BASE_URL=https://app.smartsuite.com/api/v1

# ============================================================================
# SUPABASE CONFIGURATION (SHARED WITH EAV ORCHESTRATOR)
# ============================================================================
# Uses same Supabase project as EAV Orchestrator for knowledge platform

# Supabase Project URL
KNOWLEDGE_SUPABASE_URL=https://vbcfaegexbygqgsstoig.supabase.co
SUPABASE_URL=https://vbcfaegexbygqgsstoig.supabase.co

# Supabase Anonymous Key (safe for client)
KNOWLEDGE_SUPABASE_ANON_KEY=your-supabase-anon-key-here
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Supabase Service Role Key (KEEP SECRET!)
KNOWLEDGE_SUPABASE_SERVICE_KEY=your-supabase-service-role-key-here
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# ============================================================================
# DATABASE CONNECTION STRINGS (REQUIRED FOR PRODUCTION)
# ============================================================================
# Get these from Supabase Dashboard > Settings > Database > Connection string

# Direct connection (for migrations, DDL operations)
DATABASE_URL=postgres://postgres.[project-ref]:[password]@aws-0-eu-west-2.pooler.supabase.com:5432/postgres
DIRECT_DATABASE_URL=postgres://postgres.[project-ref]:[password]@aws-0-eu-west-2.pooler.supabase.com:5432/postgres

# Session Mode Pooler (for application queries)
DATABASE_URL_SESSION=postgres://postgres.[project-ref]:[password]@aws-0-eu-west-2.pooler.supabase.com:6543/postgres?pgbouncer=true

# Transaction Mode Pooler (for transactions)
DATABASE_URL_TRANSACTION=postgres://postgres.[project-ref]:[password]@aws-0-eu-west-2.pooler.supabase.com:6543/postgres

# Project Reference
SUPABASE_PROJECT_REF=vbcfaegexbygqgsstoig
SUPABASE_DB_PASSWORD=your-database-password-here

# ============================================================================
# KNOWLEDGE PLATFORM CONFIGURATION
# ============================================================================

# Schema name for knowledge platform tables
KNOWLEDGE_DB_SCHEMA=knowledge_platform
KNOWLEDGE_PLATFORM_SCHEMA=knowledge_platform

# Feature flags
KNOWLEDGE_PLATFORM_ENABLED=true
EVENT_SOURCING_ENABLED=true

# Cache configuration
KNOWLEDGE_CACHE_TTL=300000  # 5 minutes

# Connection pool settings
KNOWLEDGE_DB_POOL_MIN=2
KNOWLEDGE_DB_POOL_MAX=10
KNOWLEDGE_DB_IDLE_TIMEOUT=10000
KNOWLEDGE_DB_CONNECTION_TIMEOUT=5000

# ============================================================================
# SMARTSUITE TABLE IDS (EAV PRODUCTION)
# ============================================================================
# Primary tables for syncing

PROJECTS_TABLE_ID=68a8ff5237fde0bf797c05b3
SMARTSUITE_PROJECTS_TABLE_ID=68a8ff5237fde0bf797c05b3

VIDEOS_TABLE_ID=68b2437a8f1755b055e0a124
SMARTSUITE_VIDEOS_TABLE_ID=68b2437a8f1755b055e0a124

TASKS_TABLE_ID=68a8ffac490e5496953e5b1c
SMARTSUITE_TASKS_TABLE_ID=68a8ffac490e5496953e5b1c

# ============================================================================
# TEST ENVIRONMENT CONFIGURATION
# ============================================================================

# Test workspace for development (if different from production)
TEST_WORKSPACE_ID=s3qnmox1

# Test environment solution IDs
# - TEST EAV PROD: 68ab34b30b1e05e11a8ba87e (3 applications, 4 records)
# - Test-Environment: 68abe5f1572f2eb9d97c0c71 (1 application, 11 records)
TEST_SOLUTION_ID=68ab34b30b1e05e11a8ba87e
TEST_TABLE_ID=68ab34b30b1e05e11a8ba87f

# ============================================================================
# RATE LIMITING & PERFORMANCE
# ============================================================================

# SmartSuite API rate limiting (seconds between requests)
SMARTSUITE_RATE_LIMIT_DELAY=0.2  # 5 requests per second

# Retry configuration
SMARTSUITE_MAX_RETRIES=3

# Safety mode - set to true for preview-only operations
SMARTSUITE_DRY_RUN=false

# ============================================================================
# LOGGING & MONITORING
# ============================================================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# Enable debug mode for detailed logging
DEBUG=false

# ============================================================================
# SECURITY & CORS
# ============================================================================

# CORS allowed origins (if running as API server)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# JWT Secret (if using authentication)
JWT_SECRET=your-jwt-secret-minimum-32-characters

# ============================================================================
# NOTES & WARNINGS
# ============================================================================
#
# CRITICAL SECURITY NOTES:
# 1. NEVER commit .env.local file with real values to git
# 2. Keep SERVICE_KEY secret - never expose in client code
# 3. Rotate API tokens regularly
# 4. Use test environments for development
#
# INTEGRATION WITH EAV ORCHESTRATOR:
# - Shares same Supabase project (vbcfaegexbygqgsstoig)
# - Knowledge platform schema stores field mappings
# - Enables SmartSuite sync for Phase 4
#
# SMARTSUITE SAFETY:
# - Always test with DRY_RUN=true first
# - Use TEST_SOLUTION_ID for development
# - Monitor rate limits to avoid API exhaustion
#
# DATABASE POOLING:
# - Use DATABASE_URL for migrations
# - Use DATABASE_URL_SESSION for app queries
# - Use DATABASE_URL_TRANSACTION for transactions
#
# ============================================================================
